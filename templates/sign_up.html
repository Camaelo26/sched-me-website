<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Registration</title>
</head>
<body>
    <h1>User Registration</h1>
    <form action="/signup" method="POST">
        <label for="username">Username:</label>
        <input type="text" id="username" name="username" required><br><br>
        
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required><br><br>
        
        <label for="role">Role:</label>
        <select id="role" name="role">
            <option value="Patient">Patient</option>
            <option value="Doctor">Doctor</option>
        </select><br><br>
        
        <label for="first_name">First Name:</label>
        <input type="text" id="first_name" name="first_name" required><br><br>
        
        <label for="last_name">Last Name:</label>
        <input type="text" id="last_name" name="last_name" required><br><br>
        
        <!-- Additional fields based on role -->
        <!-- For patient -->
        <div id="patient_fields" style="display: none;">
            <label for="dob">Date of Birth:</label>
            <input type="date" id="dob" name="dob"><br><br>
            
            <label for="gender">Gender:</label>
            <select id="gender" name="gender">
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
            </select><br><br>
            
            <label for="contact_number">Contact Number:</label>
            <input type="text" id="contact_number" name="contact_number"><br><br>
            
            <label for="address">Address:</label>
            <input type="text" id="address" name="address"><br><br>
            
            <label for="email">Email:</label>
            <input type="email" id="email" name="email"><br><br>
        </div>
        
        <!-- For doctor -->
        <div id="doctor_fields" style="display: none;">
            <label for="department_id">Department ID:</label>
            <input type="text" id="department_id" name="department_id"><br><br>
            
            <label for="contact_number">Contact Number:</label>
            <input type="text" id="contact_number" name="contact_number"><br><br>
            
            <label for="email">Email:</label>
            <input type="email" id="email" name="email"><br><br>
        </div>
        
        <input type="submit" value="Sign Up">
    </form>

     <script>
        document.addEventListener("DOMContentLoaded", function() {
            var roleSelect = document.getElementById("role");
            toggleFields(roleSelect.value);  // Call on page load based on the default selected value
    
            roleSelect.addEventListener("change", function() {
                toggleFields(this.value);
            });
    
            function toggleFields(role) {
                var patientFields = document.getElementById("patient_fields");
                var doctorFields = document.getElementById("doctor_fields");
                if (role === "Patient") {
                    patientFields.style.display = "block";
                    doctorFields.style.display = "none";
                    // Clear doctor fields to avoid sending them
                    doctorFields.querySelectorAll('input').forEach(input => input.value = '');
                } else if (role === "Doctor") {
                    patientFields.style.display = "none";
                    doctorFields.style.display = "block";
                    // Clear patient fields to avoid sending them
                    patientFields.querySelectorAll('input').forEach(input => input.value = '');
                }
            }
        });
    </script>
    
</body>
</html>
